/*
 * jQuery 2d Transform v0.9.0pre
 * http://wiki.github.com/heygrady/transform/
 *
 * Copyright 2010, Grady Kuhnline
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 * 
 * Date: Wed Oct 6 23:57:04 2010 -0700
 */
(function(h,i,l,c){var j=/progid:DXImageTransform\.Microsoft\.Matrix\(.*?\)/;var e=l.createElement("modernizr"),f=e.style;function p(m){return parseFloat(m)}function o(){var m={transformProperty:"",MozTransform:"-moz-",WebkitTransform:"-webkit-",OTransform:"-o-",msTransform:"-ms-"};for(var r in m){if(typeof f[r]!="undefined"){return m[r]}}return null}function q(){if(typeof(i.Modernizr)!=="undefined"){return Modernizr.csstransforms}var r=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var m in r){if(f[r[m]]!==c){return true}}}var a=o(),k=a!==null?a+"transform":false,n=a!==null?a+"transform-origin":false;h.support.csstransforms=q();h.extend({transform:function(m){m.transform=this;this.$elem=h(m);this.applyingMatrix=false;this.matrix=null;this.height=null;this.width=null;this.outerHeight=null;this.outerWidth=null;this.boxSizingValue=null;this.boxSizingProperty=null;this.attr=null;this.transformProperty=k;this.transformOriginProperty=n}});h.extend(h.transform,{funcs:["matrix","origin","reflect","reflectX","reflectXY","reflectY","rotate","scale","scaleX","scaleY","skew","skewX","skewY","translate","translateX","translateY"],rfunc:{angle:/^rotate|skew[X|Y]?$/,length:/^origin|translate[X|Y]?$/,scale:/^scale[X|Y]?$/,reflect:/^reflect(XY|X|Y)?$/}});h.fn.transform=function(m,r){return this.each(function(){var s=this.transform||new h.transform(this);if(m){s.exec(m,r)}})};h.transform.prototype={exec:function(m,r){r=h.extend(true,{forceMatrix:false,preserve:false},r);this.attr=null;if(r.preserve){m=h.extend(true,this.getAttrs(true,true),m)}else{m=h.extend(true,{},m)}this.setAttrs(m);if(h.support.csstransforms&&!r.forceMatrix){return this.execFuncs(m)}else{if(h.browser.msie||(h.support.csstransforms&&r.forceMatrix)){return this.execMatrix(m)}}return false},execFuncs:function(r){var m=[];for(var s in r){if(s=="origin"){this[s].apply(this,h.isArray(r[s])?r[s]:[r[s]])}else{if(h.inArray(s,h.transform.funcs)!=-1){m.push(this.createTransformFunc(s,r[s]))}}}this.$elem.css(k,m.join(" "));return true},execMatrix:function(s){var D,y,A;for(var u in s){if(h.matrix[u]){A=h.isArray(s[u])?s[u]:[s[u]];A=h.map(A,p);y=h.matrix[u].apply(this,A);D=D?D.x(y):y}else{if(u=="origin"){A=h.isArray(s[u])?s[u]:[s[u]];this[u].apply(this,A)}}}D=D||h.matrix.identity();var E=parseFloat(D.e(1,1).toFixed(6)),C=parseFloat(D.e(2,1).toFixed(6)),B=parseFloat(D.e(1,2).toFixed(6)),z=parseFloat(D.e(2,2).toFixed(6)),w=D.rows===3?parseFloat(D.e(1,3).toFixed(6)):0,v=D.rows===3?parseFloat(D.e(2,3).toFixed(6)):0;if(h.support.csstransforms&&a==="-moz-"){this.$elem.css(k,"matrix("+E+", "+C+", "+B+", "+z+", "+w+"px, "+v+"px)")}else{if(h.support.csstransforms){this.$elem.css(k,"matrix("+E+", "+C+", "+B+", "+z+", "+w+", "+v+")")}else{if(h.browser.msie){var m="";var r=this.$elem[0].style;var x="progid:DXImageTransform.Microsoft.Matrix(M11="+E+", M12="+B+", M21="+C+", M22="+z+", sizingMethod='auto expand')";var t=r.filter||jQuery.curCSS(this.$elem[0],"filter")||"";r.filter=j.test(t)?t.replace(j,x):t?t+" "+x:x;this.applyingMatrix=true;this.matrix=D;this.fixPosition(D,w,v);this.applyingMatrix=false;this.matrix=null}}}return true},origin:function(m,r){if(h.support.csstransforms){if(typeof r==="undefined"){this.$elem.css(n,m)}else{this.$elem.css(n,m+" "+r)}return true}switch(m){case"left":m="0";break;case"right":m="100%";break;case"center":case c:m="50%"}switch(r){case"top":r="0";break;case"bottom":r="100%";break;case"center":case c:r="50%"}if(/%/.test(m)&&/%/.test(r)){this.setAttr("origin",[m,r]);return true}this.setAttr("origin",[/%/.test(m)?m:parseFloat(m)+"px",/%/.test(r)?r:parseFloat(r)+"px"]);return true},createTransformFunc:function(t,u){if(h.transform.rfunc.reflect.test(t)){var s=u?h.matrix[t]():h.matrix.identity(),r=s.e(1,1),m=s.e(2,1),w=s.e(1,2),v=s.e(2,2);return"matrix("+r+", "+m+", "+w+", "+v+", 0, 0)"}u=g(t,u);if(!h.isArray(u)){return t+"("+u+")"}else{if(t=="matrix"){if(a==="-moz-"&&u[4]){u[4]=u[4]+"px"}if(a==="-moz-"&&u[5]){u[5]=u[5]+"px"}return"matrix("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+(u[4]||0)+", "+(u[5]||0)+")"}else{return t+"("+u[0]+", "+u[1]+")"}}},fixPosition:function(z,w,v,B,m){var u=new h.matrix.calc(z,this.safeOuterHeight(),this.safeOuterWidth()),A=this.getAttr("origin");var t=u.originOffset(new h.matrix.V2(/%/.test(A[0])?parseFloat(A[0])/100*u.outerWidth:parseFloat(A[0]),/%/.test(A[1])?parseFloat(A[1])/100*u.outerHeight:parseFloat(A[1])));var r=u.sides();var s=this.$elem.css("position");if(s=="static"){s="relative"}var y={top:0,left:0};var x={position:s,top:(t.top+v+r.top+y.top)+"px",left:(t.left+w+r.left+y.left)+"px",zoom:1};this.$elem.css(x)}};var b=/^([\+\-]=)?([\d+.\-]+)(.*)$/;function g(r,w){var y=!h.isArray(w)?[w]:w,m=h.transform.rfunc.angle,x=h.transform.rfunc.length;for(var t=0,u=y.length;t<u;t++){var s=b.exec(y[t]),v="";if(m.test(r)){v="deg";if(s[3]&&!h.angle.runit.test(s[3])){s[3]=null}}else{if(x.test(r)){v="px"}}if(!s){y[t]=0+v}else{if(!s[3]){y[t]+=v}}}return u==1?y[0]:y}})(jQuery,this,this.document);(function(e,c,a,g){e.extend(e.transform.prototype,{safeOuterHeight:function(){return this.safeOuterLength("height")},safeOuterWidth:function(){return this.safeOuterLength("width")},safeOuterLength:function(m){var p="outer"+(m=="width"?"Width":"Height");if(e.browser.msie){m=m=="width"?"width":"height";if(this.applyingMatrix&&!this[p]&&this.matrix){var l=new e.matrix.calc(this.matrix,1,1),n=l.offset(),h=this.$elem[p]()/n[m];this[p]=h;return h}else{if(this.applyingMatrix&&this[p]){return this[p]}}var o={height:["top","bottom"],width:["left","right"]};var i=this.$elem[0],k=parseFloat(e.curCSS(i,m,true)),q=this.boxSizingProperty,j=this.boxSizingValue;if(!this.boxSizingProperty){q=this.boxSizingProperty=f()||"box-sizing";j=this.boxSizingValue=this.$elem.css(q)||"content-box"}if(this[p]&&this[m]==k){return this[p]}else{this[m]=k}if(q&&(j=="padding-box"||j=="content-box")){k+=parseFloat(e.curCSS(i,"padding-"+o[m][0],true))||0+parseFloat(e.curCSS(i,"padding-"+o[m][1],true))||0}if(q&&j=="content-box"){k+=parseFloat(e.curCSS(i,"border-"+o[m][0]+"-width",true))||0+parseFloat(e.curCSS(i,"border-"+o[m][1]+"-width",true))||0}this[p]=k;return k}return this.$elem[p]()}});var b=null;function f(){if(b){return b}var i={boxSizing:"box-sizing",MozBoxSizing:"-moz-box-sizing",WebkitBoxSizing:"-webkit-box-sizing",OBoxSizing:"-o-box-sizing"},h=a.body;for(var j in i){if(typeof h.style[j]!="undefined"){b=i[j];return b}}return null}})(jQuery,this,this.document);(function(h,g,b,i){var e=/([\w\-]*?)\((.*?)\)/g,a="data-transform",f=/\s/,c=/,\s/;h.extend(h.transform.prototype,{setAttrs:function(j){var k="",m;for(var l in j){m=j[l];if(h.isArray(m)){m=m.join(", ")}k+=" "+l+"("+m+")"}this.attr=h.trim(k);this.$elem.attr(a,this.attr)},setAttr:function(l,m){if(h.isArray(m)){m=m.join(", ")}m=h.trim(m+"");var k=this.attr||this.$elem.attr(a);if(!k||k.indexOf(l)>-1){this.attr=h.trim(k+" "+l+"("+m+")");this.$elem.attr(a,this.attr)}else{var j=[],n;e.lastIndex=0;while((result=e.exec(k))!==null){if(l==n[1]){j.push(l+"("+m+")")}else{j.push(n[0])}}this.attr=j.join(" ");this.$elem.attr(a,this.attr)}},getAttrs:function(){var k=this.attr||this.$elem.attr(a);if(!k){return{}}var j={},m,l;e.lastIndex=0;while((m=e.exec(k))!==null){if(m){l=m[2].split(c);j[m[1]]=l.length==1?l[0]:l}}return j},getAttr:function(k){var j=this.getAttrs();if(typeof j[k]!=="undefined"){return j[k]}switch(k){case"scale":return[1,1];case"scaleX":case"scaleY":return 1;case"matrix":return[1,0,0,1,0,0];case"origin":if(h.support.csstransforms){return this.$elem.css(this.transformOriginProperty).split(f)}else{return["50%","50%"]}}return null}})})(jQuery,this,this.document);(function(f,e,b,g){var a=/^([+\-]=)?([\d+.\-]+)(.*)$/;var c=/^(.*?)\s+([+\-]=)?([\d+.\-]+)(.*)$/;var i=f.fn.animate;f.fn.animate=function(n,k,m,l){if(n&&!jQuery.isEmptyObject(n)){var j=this;jQuery.each(n,function(o,p){if(f.inArray(o,f.transform.funcs)!=-1){if(f.transform.rfunc.reflect.test(o)){var q=p?f.matrix[o]():f.matrix.identity(),u=q.elements;p=[u[0],u[1],u[2],u[3]]}var s=a.exec(p);if((s&&s[3])||f.isArray(p)){var r,v,w=[];if(f.isArray(p)){f.each(p,function(x){s=a.exec(this);r=parseFloat(s[2]);v=s[3]||"px";w.push({end:(s[1]?s[1]:"")+r,unit:v})})}else{r=parseFloat(s[2]);v=s[3]||"px";w.push({end:(s[1]?s[1]:"")+r,unit:v});var t=0;while(s=c.exec(v)){w[t].unit=s[1];w.push({end:(s[2]?s[2]:"")+parseFloat(s[3]),unit:s[4]});v=s[4];t++}}j.data("data-animate-"+o,w);n[o]=w[0].end}}})}return i.apply(this,arguments)};var h=f.fx.prototype.cur;f.fx.prototype.cur=function(l){if(f.inArray(this.prop,f.transform.funcs)!=-1){this.transform=this.transform||this.elem.transform||new f.transform(this.elem);var j=f.transform.rfunc;var k=this.transform.getAttr(this.prop),m=a.exec(f.isArray(k)?k[0]:k);if(k===null||m===null){k=j.scale.test(this.prop)||j.reflect.test(this.prop)?1:0;m=[null,null,k]}return parseFloat(m[2])}return h.apply(this,arguments)};f.fx.multivalueInit=function(m){var k=f(m.elem),j=m.transform.getAttr(m.prop),l=k.data("data-animate-"+m.prop);if(l){k.removeData("data-animate-"+m.prop)}if(f.transform.rfunc.reflect.test(m.prop)){j=m.transform.getAttr("matrix")}m.values=[];if(f.isArray(j)&&!f.isArray(l)){l=[{end:parseFloat(m.end),unit:m.unit},{end:f.transform.rfunc.scale.test(m.prop)?1:0,unit:m.unit}]}if(l){var p,o=f.transform.rfunc.scale,n;f.each(l,function(q,r){if(f.isArray(j)){p=j[q]}else{if(q>0){p=o.test(m.prop)?j:null}else{p=j}}if(!p&&p!==0){p=o.test(m.prop)?1:0}p=parseFloat(p);n=a.exec(r.end);if(n&&n[1]){r.end=((n[1]==="-="?-1:1)*parseFloat(n[2]))+p}m.values.push({start:parseFloat(p),end:parseFloat(r.end),unit:r.unit})})}else{m.values.push({start:parseFloat(m.start),end:parseFloat(m.end),unit:m.unit})}};f.fx.multivalueStep={_default:function(j){f.each(j.values,function(k,l){j.values[k].now=l.start+((l.end-l.start)*j.pos)})}};f.each(f.transform.funcs,function(j,k){f.fx.step[k]=function(o){if(!o.transformInit){o.transform=o.transform||o.elem.transform||new f.transform(o.elem);f.fx.multivalueInit(o);if(o.values.length>1){o.multiple=true}var n=f.transform.rfunc;if(n.angle.test(o.prop)){o.unit="deg"}else{if(n.scale.test(o.prop)){o.unit=""}else{if(n.reflect.test(o.prop)){o.unit=""}else{if(o.prop=="matrix"){o.unit=""}}}}f.each(o.values,function(q){o.values[q].unit=o.unit});o.transformInit=true}if(o.multiple){(f.fx.multivalueStep[o.prop]||f.fx.multivalueStep._default)(o)}else{o.values[0].now=o.now}var m=[];f.each(o.values,function(q,r){if(r.unit=="deg"){while(r.now>=360){r.now-=360}while(r.now<=-360){r.now+=360}}m.push(parseFloat(parseFloat(r.now).toFixed(8))+r.unit)});var l={},p=f.transform.rfunc.reflect.test(o.prop)?"matrix":o.prop;l[p]=o.multiple?m:m[0];o.transform.exec(l,{preserve:true})}})})(jQuery,this,this.document);(function(g,h,j,b){var c=180/Math.PI;var k=200/Math.PI;var f=Math.PI/180;var e=2/1.8;var i=0.9;var a=Math.PI/200;g.extend({angle:{runit:/(deg|g?rad)/,radianToDegree:function(l){return l*c},radianToGrad:function(l){return l*k},degreeToRadian:function(l){return l*f},degreeToGrad:function(l){return l*e},gradToDegree:function(l){return l*i},gradToRadian:function(l){return l*a}}})})(jQuery,this,this.document);(function(c,b,a,e){if(typeof(c.matrix)=="undefined"){c.extend({matrix:{}})}c.extend(c.matrix,{calc:function(f,g,h){this.matrix=f;this.outerHeight=g;this.outerWidth=h}});c.matrix.calc.prototype={coord:function(f,j,i){i=typeof(i)!=="undefined"?i:0;var h=this.matrix,g;switch(h.rows){case 2:g=h.x(new c.matrix.V2(f,j));break;case 3:g=h.x(new c.matrix.V3(f,j,i));break}return g},corners:function(f,i){var g=!(typeof(f)!=="undefined"||typeof(i)!=="undefined"),h;if(!this.c||!g){i=i||this.outerHeight;f=f||this.outerWidth;h={tl:this.coord(0,0),bl:this.coord(0,i),tr:this.coord(f,0),br:this.coord(f,i)}}else{h=this.c}if(g){this.c=h}return h},sides:function(f){var g=f||this.corners();return{top:Math.min(g.tl.e(2),g.tr.e(2),g.br.e(2),g.bl.e(2)),bottom:Math.max(g.tl.e(2),g.tr.e(2),g.br.e(2),g.bl.e(2)),left:Math.min(g.tl.e(1),g.tr.e(1),g.br.e(1),g.bl.e(1)),right:Math.max(g.tl.e(1),g.tr.e(1),g.br.e(1),g.bl.e(1))}},offset:function(f){var g=this.sides(f);return{height:Math.abs(g.bottom-g.top),width:Math.abs(g.right-g.left)}},area:function(f){var i=f||this.corners();var h={x:i.tr.e(1)-i.tl.e(1)+i.br.e(1)-i.bl.e(1),y:i.tr.e(2)-i.tl.e(2)+i.br.e(2)-i.bl.e(2)},g={x:i.bl.e(1)-i.tl.e(1)+i.br.e(1)-i.tr.e(1),y:i.bl.e(2)-i.tl.e(2)+i.br.e(2)-i.tr.e(2)};return 0.25*Math.abs(h.e(1)*g.e(2)-h.e(2)*g.e(1))},nonAffinity:function(){var g=this.sides(),h=g.top-g.bottom,f=g.left-g.right;return parseFloat(parseFloat(Math.abs((Math.pow(h,2)+Math.pow(f,2))/(g.top*g.bottom+g.left*g.right))).toFixed(8))},originOffset:function(i,h){i=i?i:new c.matrix.V2(this.outerWidth*0.5,this.outerHeight*0.5);h=h?h:new c.matrix.V2(0,0);var f=this.coord(i.e(1),i.e(2));var g=this.coord(h.e(1),h.e(2));return{top:(g.e(2)-h.e(2))-(f.e(2)-i.e(2)),left:(g.e(1)-h.e(1))-(f.e(1)-i.e(1))}}}})(jQuery,this,this.document);(function(c,b,a,e){if(typeof(c.matrix)=="undefined"){c.extend({matrix:{}})}c.extend(c.matrix,{identity:function(h){h=h||2;var j=h*h,k=new Array(j),g=h+1;for(var f=0;f<j;f++){k[f]=(f%g)===0?1:0}return new c.matrix["M"+h+"x"+h](k)},matrix:function(){var f=Array.prototype.slice.call(arguments);switch(arguments.length){case 4:return new c.matrix.M2x2(f[0],f[2],f[1],f[3]);case 6:return new c.matrix.M3x3(f[0],f[2],f[4],f[1],f[3],f[5],0,0,1)}},reflect:function(){return new c.matrix.M2x2(-1,0,0,-1)},reflectX:function(){return new c.matrix.M2x2(1,0,0,-1)},reflectXY:function(){return new c.matrix.M2x2(0,1,1,0)},reflectY:function(){return new c.matrix.M2x2(-1,0,0,1)},rotate:function(j){var g=c.angle.degreeToRadian(j),i=Math.cos(g),k=Math.sin(g);var h=i,f=k,m=-k,l=i;return new c.matrix.M2x2(h,m,f,l)},scale:function(g,f){g=g||g===0?g:1;f=f||f===0?f:g;return new c.matrix.M2x2(g,0,0,f)},scaleX:function(f){return c.matrix.scale(f,1)},scaleY:function(f){return c.matrix.scale(1,f)},skew:function(i,g){i=i||0;g=g||0;var j=c.angle.degreeToRadian(i),h=c.angle.degreeToRadian(g),f=Math.tan(j),k=Math.tan(h);return new c.matrix.M2x2(1,f,k,1)},skewX:function(f){return c.matrix.skew(f)},skewY:function(f){return c.matrix.skew(0,f)},translate:function(g,f){g=g||0;f=f||0;return new c.matrix.M3x3(1,0,g,0,1,f,0,0,1)}})})(jQuery,this,this.document);
/*
 * jQuery 3d Transform v0.5.1pre
 * http://wiki.github.com/heygrady/transform3d/
 *
 * Copyright 2010, Grady Kuhnline
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 * 
 * Date: Wed Oct 6 23:57:04 2010 -0700
 */
(function(i,k,n,b){var e=n.createElement("modernizr"),g=e.style,c=n.documentElement;var a=o(),l=a!==null?a+"transform":false,q=a!==null?a+"transform-origin":false,h=a!==null?a+"perspective":false,j=a!==null?a+"perspective-origin":false,r=a!==null?a+"backface-visibility":false;i.support.csstransforms3d=f();i.extend({transform3d:function(m){m.transform3d=this;this.$elem=i(m);this.outerHeight=0;this.outerWidth=0;this.$patches=null;this.$wrapper=null;this.$perspective=null;this.options={quality:5,nudge:1,preserve:false,transform:"default",perspectiveSelector:null};this.attr=null;this.transformProperty=l;this.transformOriginProperty=q;this.perspectiveProperty=h;this.perspectiveOriginProperty=j;this.backfaceVisibilityProperty=r;this.wrapperClass="transform3d-wrapper";this.patchClass="transform3d-patch";this.patchWrapperClass="transform3d-patch-wrapper";this.perspectiveClass="transform3d-perspective"}});i.transform3d.funcs=["matrix3d","perspective","reflectZ","rotate3d","rotateX","rotateY","rotateZ","scale3d","scaleX","scaleY","scaleZ","translate3d","translateX","translateY","translateZ"];i.fn.transform3d=function(m,s){return this.each(function(){var u=this.transform3d||new i.transform3d(this);if(m){u.exec(m,s)}})};i.transform3d.prototype={exec:function(t,v){this.options=i.extend(true,this.options,v);this.attr=null;if(this.options.preserve){t=i.extend(true,this.getAttrs(true,true),t)}else{t=i.extend(true,{},t)}this.setAttrs(t);if(i.support.csstransforms3d){}if(this.options.quality>9){this.options.quality=9}else{if(this.options.quality<1){this.options.quality=1}}this.outerHeight=this.$elem.outerHeight();this.outerWidth=this.$elem.outerWidth();if(!this.$wrapper){this.$wrapper=this.$elem.wrap('<div class="'+this.wrapperClass+'">').parent();this.$wrapper.css({position:"relative"});this.fixOpacity();this.fixPosition()}var s=this.options.perspectiveSelector;if(s){this.$perspective=this.$elem.closest(s).addClass(this.perspectiveClass);var x=this.getCenterOffset(this.$perspective),m=this.getCenterOffset(this.$elem);if(t.perspective&&(x.top!=m.top||x.left!=m.left)){var w=x.left-m.left,u=x.top-m.top;t.perspective=[t.perspective,w,u];var y=this.$wrapper.position();this.$wrapper.css({top:y.top+u+"px",left:y.left+w+"px"})}}this.createPatches();this.execMatrix(t);this.$elem.css("visibility","hidden")},execMatrix:function(F){var M,C,u;for(var z in F){if(i.matrix[z]){u=i.isArray(F[z])?F[z]:[F[z]];u=i.map(u,p);C=i.matrix[z].apply(this,u);M=M?M.x(C):C}else{if(z=="origin"){}}}if(i.isArray(F.perspective)){var R=F.perspective[1]||0;ey=F.perspective[2]||0}var t=new i.matrix.calc(M,this.outerHeight,this.outerWidth),J,A,I=["tl","tr","br","bl"],H={tl:["tl","tr","bl"],tr:["tr","br","tl"],br:["br","bl","tr"],bl:["bl","tl","br"]},P;for(var N=0,O=this.$patches.length;N<O;N++){var V=this.getPatchCorners(N,true);var T={tl:t.coord(V.tl.e(1),V.tl.e(2),0),tr:t.coord(V.tr.e(1),V.tr.e(2),0),br:t.coord(V.br.e(1),V.br.e(2),0),bl:t.coord(V.bl.e(1),V.bl.e(2),0)};var K;if(this.options.transform=="quadrant"){if(T.tl.e(1)<=0&&T.tl.e(2)<=0){K=H.tl}else{if(T.tr.e(1)>=0&&T.tr.e(2)<=0){K=H.tr}else{if(T.br.e(1)>=0&&T.br.e(2)>=0){K=H.br}else{if(T.bl.e(1)<=0&&T.bl.e(2)>=0){K=H.bl}}}}}else{var E=this.outerWidth,D=this.outerHeight,w=E/2,v=D/2,G=(this.options.transform=="area");if(!G&&((V.tl.e(1)<0&&V.tl.e(2)==0-v)||(V.tl.e(1)==0-w&&V.tl.e(2)<0))){K=H.tl}else{if(!G&&((V.tr.e(1)>0&&V.tr.e(2)==0-v)||(V.tr.e(1)==E-w&&V.tr.e(2)<0))){K=H.tr}else{if(!G&&((V.br.e(1)>0&&V.br.e(2)==D-v)||(V.br.e(1)==E-w&&V.br.e(2)>0))){K=H.br}else{if(!G&&((V.bl.e(1)<0&&V.bl.e(2)==D-v)||(V.bl.e(1)==0-w&&V.bl.e(2)>0))){K=H.bl}else{var Q={tl:((T.tr.e(1)-T.tl.e(1))*(T.bl.e(2)-T.tl.e(2))-(T.bl.e(1)-T.tl.e(1))*(T.tr.e(2)-T.tl.e(2)))/2,tr:((T.br.e(1)-T.tr.e(1))*(T.tl.e(2)-T.tr.e(2))-(T.tl.e(1)-T.tr.e(1))*(T.br.e(2)-T.tr.e(2)))/2,br:((T.bl.e(1)-T.br.e(1))*(T.tr.e(2)-T.br.e(2))-(T.tr.e(1)-T.br.e(1))*(T.bl.e(2)-T.br.e(2)))/2,bl:((T.tl.e(1)-T.bl.e(1))*(T.br.e(2)-T.bl.e(2))-(T.br.e(1)-T.bl.e(1))*(T.tl.e(2)-T.bl.e(2)))/2};var B,s=0;for(var L=0;L>4,B=I[L];L++){if(Q[B]>s){K=H[B]}}}}}}}var J=(new i.matrix.M3x3(V[K[0]].e(1),V[K[0]].e(2),1,V[K[2]].e(1),V[K[2]].e(2),1,V[K[1]].e(1),V[K[1]].e(2),1)).inverse();var A={x:J.x(new i.matrix.V3(T[K[0]].e(1),T[K[2]].e(1),T[K[1]].e(1))),y:J.x(new i.matrix.V3(T[K[0]].e(2),T[K[2]].e(2),T[K[1]].e(2)))};P=this.$patches.eq(N);P.transform({matrix:[parseFloat(A.x.e(1).toFixed(6)),parseFloat(A.y.e(1).toFixed(6)),parseFloat(A.x.e(2).toFixed(6)),parseFloat(A.y.e(2).toFixed(6)),parseFloat(A.x.e(3).toFixed(6)),parseFloat(A.y.e(3).toFixed(6))]});var U=this.getPatchCorners(N),S="rect("+parseFloat((U.tl.e(2)/this.options.nudge).toFixed(6))+"px, "+parseFloat((U.br.e(1)*this.options.nudge).toFixed(6))+"px, "+parseFloat((U.br.e(2)*this.options.nudge).toFixed(6))+"px, "+parseFloat((U.tl.e(1)/this.options.nudge).toFixed(6))+"px)";if(i.browser.msie&&i.browser.version<8){S=S.replace(",","","g")}if(i.browser.msie&&!i.support.csstransforms3d){P.children("."+this.patchClass).css({clip:S,"z-index":Math.round(T[K[0]].e(3))})}else{P.css({clip:S,"z-index":Math.round(T[K[0]].e(3))})}}this.$wrapper.css("z-index",Math.round(t.coord(0,0,0).e(3)))},getPatchCorners:function(v,m){var D=this.options.quality,w=D*D,u=v%D,E=Math.floor(v/D);var B=this.outerWidth,z=this.outerHeight,t=B/D,s=z/D,C=(E)*t,A=(u)*s;if(m){C=C-B/2;A=A-z/2}return{tl:new i.matrix.V2(C,A),tr:new i.matrix.V2(C+t,A),br:new i.matrix.V2(C+t,A+s),bl:new i.matrix.V2(C,A+s)}},createPatches:function(){var w=this.options.quality,u=w*w;if(i.browser.msie&&!i.support.csstransforms3d){this.$patches=this.$wrapper.children("."+this.patchWrapperClass)}else{this.$patches=this.$wrapper.children("."+this.patchClass)}if(this.$patches.length<u){var s=n.createDocumentFragment(),v,t=this.$patches.length;var m=this.$elem.clone().css({position:"absolute",top:0,left:0,height:this.$elem.height()+"px",width:this.$elem.width()+"px"}).addClass(this.patchClass);do{s.appendChild(m.clone()[0]);t++}while(t<u);if(i.browser.msie&&!i.support.csstransforms3d){i(s).children().wrap('<div class="'+this.patchWrapperClass+'"/>');i(s).children("."+this.patchWrapperClass).css({position:"absolute",height:this.$elem.height()+"px",width:this.$elem.width()+"px"})}this.$wrapper.append(s.cloneNode(true));if(i.browser.msie&&!i.support.csstransforms3d){this.$patches=this.$wrapper.children("."+this.patchWrapperClass)}else{this.$patches=this.$wrapper.children("."+this.patchClass)}}else{if(this.$patches.length>u){var t=this.$patches.length;do{t--;this.$patches.eq(t).remove()}while(t>u)}}},fixOpacity:function(){var m=this.$elem.css("opacity");if(m&&m!=1){this.$elem.css("opacity",1);this.$wrapper.css("opacity",m)}},fixPosition:function(){var s=this.$elem.css("position");if(s!=="static"){this.$wrapper.before(this.$elem);var m=this.$elem.position();this.$elem.css({top:0,left:0});this.$wrapper.css({position:s,top:m.top,left:m.left});this.$wrapper.prepend(this.$elem)}},getCenterOffset:function(s){var u=s.offset(),m=s.outerHeight(),t=s.outerWidth();return{top:u.top+m/2,left:u.left+t/2}}};function p(m){return parseFloat(m)}function o(){var m={transformProperty:"",MozTransform:"-moz-",WebkitTransform:"-webkit-",OTransform:"-o-",msTransform:"-ms-"};for(var s in m){if(typeof g[s]!="undefined"){return m[s]}}return null}function f(){if(typeof(k.Modernizr)!=="undefined"){return Modernizr.csstransforms3d}var u=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"],v=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),s=false;for(var t in u){if(g[u[t]]!==b){s=true}}if(s){var m=n.createElement("style"),w=n.createElement("div");m.textContent="@media ("+v.join("transform-3d),(")+"modernizr){#modernizr{height:3px}}";n.getElementsByTagName("head")[0].appendChild(m);w.id="modernizr";c.appendChild(w);s=w.offsetHeight===3;m.parentNode.removeChild(m);w.parentNode.removeChild(w)}return s}})(jQuery,this,this.document);(function(h,g,b,i){var e=/[\w-]*?\((.*?)\)/g,a="data-transform3d",f=/\s/,c=/,\s/;h.transform3d.prototype.setAttrs=h.transform.prototype.setAttrs;h.transform3d.prototype.setAttr=h.transform.prototype.setAttr;h.transform3d.prototype.getAttrs=h.transform.prototype.getAttrs;h.extend(h.transform3d.prototype,{getAttr:function(k){var j=this.getAttrs();if(typeof j[k]!=="undefined"){return j[k]}switch(k){case"scale":return[1,1];break;case"scale3d":return[1,1,1];break;case"scaleX":case"scaleY":case"scaleZ":return 1;break;case"matrix":return[1,0,0,1,0,0];break;case"matrix3d":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];break;case"origin":if(h.support.csstransforms){return this.$elem.css(this.transformOriginProperty).split(f)}else{return["50%","50%"]}}return null}});h.each(h.transform3d.funcs,function(j,k){h.cssNumber[k]=true;h.cssHooks[k]={set:function(n,o){var m=n.transform3d||new h.transform3d(n),l={};l[k]=o;m.exec(l,{preserve:true})},get:function(n,m){var l=n.transform3d||new h.transform3d(n);return l.getAttr(k)}}})})(jQuery,this,this.document);(function(c,b,a,e){c.each(c.transform3d.funcs,function(f,g){c.fx.step[g]=function(j){var i=j.elem.transform3d||new c.transform3d(j.elem),h={};h[j.prop]=j.now;i.exec(h,{preserve:true})}})})(jQuery,this,this.document);(function(g,f,b,h){if(typeof(g.matrix)=="undefined"){g.extend({matrix:{}})}g.extend(g.matrix,{V2:function(i,j){if(g.isArray(arguments[0])){this.elements=arguments[0].slice(0,2)}else{this.elements=[i,j]}this.length=2},V3:function(i,k,j){if(g.isArray(arguments[0])){this.elements=arguments[0].slice(0,3)}else{this.elements=[i,k,j]}this.length=3},V4:function(i,l,k,j){if(g.isArray(arguments[0])){this.elements=arguments[0].slice(0,4)}else{this.elements=[i,l,k,j]}this.length=4},M2x2:function(j,i,l,k){if(g.isArray(arguments[0])){this.elements=arguments[0].slice(0,4)}else{this.elements=Array.prototype.slice.call(arguments).slice(0,4)}this.rows=2;this.cols=2},M3x3:function(n,m,l,k,j,i,q,p,o){if(g.isArray(arguments[0])){this.elements=arguments[0].slice(0,9)}else{this.elements=Array.prototype.slice.call(arguments).slice(0,9)}this.rows=3;this.cols=3},M4x4:function(t,s,q,o,l,k,j,i,x,w,v,u,r,p,n,m){if(g.isArray(arguments[0])){this.elements=arguments[0].slice(0,16)}else{this.elements=Array.prototype.slice.call(arguments).slice(0,16)}this.rows=4;this.cols=4}});var c={e:function(l,i){var j=this.rows,k=this.cols;if(l>j||i>j||l<1||i<1){return 0}return this.elements[(l-1)*k+i-1]}};g.extend(g.matrix.M2x2.prototype,c,{toM3x3:function(){var i=this.elements;return new g.matrix.M3x3(i[0],i[1],0,i[2],i[3],0,0,0,1)},toM4x4:function(){var i=this.elements;return new g.matrix.M4x4(i[0],i[1],0,0,i[2],i[3],0,0,0,0,1,0,0,0,0,1)},x:function(k){var l=typeof(k.rows)==="undefined";if(!l&&k.rows==3){return this.toM3x3().x(k)}else{if(!l&&k.rows==4){return this.toM4x4().x(k)}}var j=this.elements,i=k.elements;if(l&&i.length==2){return new g.matrix.V2(j[0]*i[0]+j[1]*i[1],j[2]*i[0]+j[3]*i[1])}else{if(i.length==j.length){return new g.matrix.M2x2(j[0]*i[0]+j[1]*i[2],j[0]*i[1]+j[1]*i[3],j[2]*i[0]+j[3]*i[2],j[2]*i[1]+j[3]*i[3])}}return false},inverse:function(){var j=1/this.determinant(),i=this.elements;return new g.matrix.M2x2(j*i[3],j*-i[1],j*-i[2],j*i[0])},determinant:function(){var i=this.elements;return i[0]*i[3]-i[1]*i[2]}});g.extend(g.matrix.M3x3.prototype,c,{toM4x4:function(){var i=this.elements;return new g.matrix.M4x4(i[0],i[1],i[2],0,i[3],i[4],i[5],0,i[6],i[7],i[8],0,0,0,0,1)},x:function(k){var l=typeof(k.rows)==="undefined";if(!l&&k.rows<3){k=k.toM3x3()}else{if(!l&&k.rows==4){return this.toM4x4().x(k)}}var j=this.elements,i=k.elements;if(l&&i.length==3){return new g.matrix.V3(j[0]*i[0]+j[1]*i[1]+j[2]*i[2],j[3]*i[0]+j[4]*i[1]+j[5]*i[2],j[6]*i[0]+j[7]*i[1]+j[8]*i[2])}else{if(i.length==j.length){return new g.matrix.M3x3(j[0]*i[0]+j[1]*i[3]+j[2]*i[6],j[0]*i[1]+j[1]*i[4]+j[2]*i[7],j[0]*i[2]+j[1]*i[5]+j[2]*i[8],j[3]*i[0]+j[4]*i[3]+j[5]*i[6],j[3]*i[1]+j[4]*i[4]+j[5]*i[7],j[3]*i[2]+j[4]*i[5]+j[5]*i[8],j[6]*i[0]+j[7]*i[3]+j[8]*i[6],j[6]*i[1]+j[7]*i[4]+j[8]*i[7],j[6]*i[2]+j[7]*i[5]+j[8]*i[8])}}return false},inverse:function(){var j=1/this.determinant(),i=this.elements;return new g.matrix.M3x3(j*(i[8]*i[4]-i[7]*i[5]),j*(-(i[8]*i[1]-i[7]*i[2])),j*(i[5]*i[1]-i[4]*i[2]),j*(-(i[8]*i[3]-i[6]*i[5])),j*(i[8]*i[0]-i[6]*i[2]),j*(-(i[5]*i[0]-i[3]*i[2])),j*(i[7]*i[3]-i[6]*i[4]),j*(-(i[7]*i[0]-i[6]*i[1])),j*(i[4]*i[0]-i[3]*i[1]))},determinant:function(){var i=this.elements;return i[0]*(i[8]*i[4]-i[7]*i[5])-i[3]*(i[8]*i[1]-i[7]*i[2])+i[6]*(i[5]*i[1]-i[4]*i[2])}});function e(){return(new g.matrix.M3x3(arguments)).determinant()}g.extend(g.matrix.M4x4.prototype,c,{x:function(k){var l=typeof(k.rows)==="undefined";if(!l&&k.rows<4){k=k.toM4x4()}var j=this.elements,i=k.elements;if(l&&i.length==4){return new g.matrix.V4(j[0]*i[0]+j[1]*i[1]+j[2]*i[2]+j[3]*i[3],j[4]*i[0]+j[5]*i[1]+j[6]*i[2]+j[7]*i[3],j[8]*i[0]+j[9]*i[1]+j[10]*i[2]+j[11]*i[3],j[12]*i[0]+j[13]*i[1]+j[14]*i[2]+j[15]*i[3])}else{if(i.length==j.length){return new g.matrix.M4x4(j[0]*i[0]+j[1]*i[4]+j[2]*i[8]+j[3]*i[12],j[0]*i[1]+j[1]*i[5]+j[2]*i[9]+j[3]*i[13],j[0]*i[2]+j[1]*i[6]+j[2]*i[10]+j[3]*i[14],j[0]*i[3]+j[1]*i[7]+j[2]*i[11]+j[3]*i[15],j[4]*i[0]+j[5]*i[4]+j[6]*i[8]+j[7]*i[12],j[4]*i[1]+j[5]*i[5]+j[6]*i[9]+j[7]*i[13],j[4]*i[2]+j[5]*i[6]+j[6]*i[10]+j[7]*i[14],j[4]*i[3]+j[5]*i[7]+j[6]*i[11]+j[7]*i[15],j[8]*i[0]+j[9]*i[4]+j[10]*i[8]+j[11]*i[12],j[8]*i[1]+j[9]*i[5]+j[10]*i[9]+j[11]*i[13],j[8]*i[2]+j[9]*i[6]+j[10]*i[10]+j[11]*i[14],j[8]*i[3]+j[9]*i[7]+j[10]*i[11]+j[11]*i[15],j[12]*i[0]+j[13]*i[4]+j[14]*i[8]+j[15]*i[12],j[12]*i[1]+j[13]*i[5]+j[14]*i[9]+j[15]*i[13],j[12]*i[2]+j[13]*i[6]+j[14]*i[10]+j[15]*i[14],j[12]*i[3]+j[13]*i[7]+j[14]*i[11]+j[15]*i[15])}}return false},inverse:function(){var j=this.adjoint(),k=1/this.determinant(),i=j.elements;return new g.matrix.M4x4(k*i[0],k*i[1],k*i[2],k*i[3],k*i[4],k*i[5],k*i[6],k*i[7],k*i[8],k*i[9],k*i[10],k*i[11],k*i[12],k*i[13],k*i[14],k*i[15])},adjoint:function(){var i=this.elements;return new g.matrix.M4x4(e(i[5],i[6],i[7],i[9],i[10],i[11],i[13],i[14],i[15]),-e(i[4],i[6],i[7],i[8],i[10],i[11],i[12],i[14],i[15]),e(i[4],i[5],i[7],i[8],i[9],i[11],i[12],i[13],i[15]),-e(i[4],i[5],i[6],i[8],i[9],i[10],i[12],i[13],i[14]),-e(i[1],i[2],i[3],i[9],i[10],i[11],i[13],i[14],i[15]),e(i[0],i[2],i[3],i[8],i[10],i[11],i[12],i[14],i[15]),-e(i[0],i[1],i[3],i[8],i[9],i[11],i[12],i[13],i[15]),e(i[0],i[1],i[2],i[8],i[9],i[10],i[12],i[13],i[14]),e(i[1],i[2],i[3],i[5],i[6],i[7],i[13],i[14],i[15]),-e(i[0],i[2],i[3],i[4],i[6],i[7],i[12],i[14],i[15]),e(i[0],i[1],i[3],i[4],i[5],i[7],i[12],i[13],i[15]),-e(i[0],i[1],i[2],i[4],i[5],i[6],i[12],i[13],i[14]),-e(i[1],i[2],i[3],i[5],i[6],i[7],i[9],i[10],i[11]),e(i[0],i[2],i[3],i[4],i[6],i[7],i[8],i[10],i[11]),-e(i[0],i[1],i[3],i[4],i[5],i[7],i[8],i[9],i[11]),e(i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]))},determinant:function(){var i=this.elements,m=e(i[5],i[6],i[7],i[9],i[10],i[11],i[13],i[14],i[15]),l=e(i[4],i[6],i[7],i[8],i[10],i[11],i[12],i[14],i[15]),k=e(i[4],i[5],i[7],i[8],i[9],i[11],i[12],i[13],i[15]),j=e(i[4],i[5],i[6],i[8],i[9],i[10],i[12],i[13],i[14]);return i[0]*m-i[1]*l+i[2]*k-i[3]*j}});var a={e:function(j){return this.elements[j-1]}};g.extend(g.matrix.V2.prototype,a);g.extend(g.matrix.V3.prototype,a);g.extend(g.matrix.V4.prototype,a,{toV3:function(){var i=this.elements;return new g.matrix.V3(i[0]/i[3],i[1]/i[3],i[2]/i[3])}})})(jQuery,this,this.document);(function(c,b,a,e){c.matrix.calc.prototype.coord=function(f,k,j,h){j=typeof(j)!=="undefined"?j:0;h=typeof(h)!=="undefined"?h:1;var i=this.matrix,g;switch(i.rows){case 2:g=i.x(new c.matrix.V2(f,k));break;case 3:g=i.x(new c.matrix.V3(f,k,j));break;case 4:g=i.x(new c.matrix.V4(f,k,j,h)).toV3();break}return g}})(jQuery,this,this.document);(function(c,b,a,e){if(typeof(c.matrix)=="undefined"){c.extend({matrix:{}})}c.extend(c.matrix,{matrix3d:function(){var f=Array.prototype.slice.call(arguments);return new c.matrix.M4x4(f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15])},perspective:function(f,h,g){if(f<0){return}h=h?h:0;g=g?g:0;d=-1/f;return new c.matrix.M4x4(1,0,0,-h,0,1,0,-g,0,0,1,0,0,0,d,1)},reflectZ:function(){return new c.matrix.M3x3(1,0,0,0,1,0,0,0,-1)},rotateX:function(j){var g=c.angle.degreeToRadian(j),i=Math.cos(g),k=Math.sin(g);var h=i,f=k,m=-k,l=i;return new c.matrix.M3x3(1,0,0,0,h,m,0,f,l)},rotateY:function(j){var g=c.angle.degreeToRadian(j),i=Math.cos(g),k=Math.sin(g);var h=i,f=k,m=-k,l=i;return new c.matrix.M3x3(h,0,f,0,1,0,m,0,l)},rotateZ:function(j){var g=c.angle.degreeToRadian(j),i=Math.cos(g),k=Math.sin(g);var h=i,f=k,m=-k,l=i;return new c.matrix.M3x3(h,m,0,f,l,0,0,0,1)},rotate3d:function(A,v,s,j){var t=c.angle.degreeToRadian(j),B=Math.cos(t),k=Math.sin(t);var w=1+(1-B)*(A*A-1),u=s*k+(1-B)*A*v,r=-v*k+(1-B)*A*s,q=-s*k+(1-B)*A*v,p=1+(1-B)*(v*v-1),o=A*k+(1-B)*v*s,n=v*k+(1-B)*A*s,m=-A*k+(1-B)*v*s,l=1+(1-B)*(s*s-1);return new c.matrix.M3x3(w,u,r,q,p,o,n,m,l)},scale3d:function(h,g,f){h=h||h===0?h:1;g=g||g===0?g:h;f=f||f===0?f:h;return new c.matrix.M3x3(h,0,0,0,g,0,0,0,f)},scaleX:function(f){return c.matrix.scale3d(f,1,1)},scaleY:function(f){return c.matrix.scale3d(1,f,1)},scaleZ:function(f){return c.matrix.scale3d(1,1,f)},translate3d:function(g,f,h){g=g?g:0;f=f?f:0;h=h?h:0;return new c.matrix.M4x4(1,0,0,g,0,1,0,f,0,0,1,h,0,0,0,1)},translateX:function(f){return c.matrix.translate3d(f)},translateY:function(f){return c.matrix.translate3d(0,f)},translateZ:function(f){return c.matrix.translate3d(0,0,f)}})})(jQuery,this,this.document);